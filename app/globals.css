@import "tailwindcss";

/* include utility classes in streamdown */
@source '../node_modules/streamdown/dist/index.js';

/* custom variant for setting dark mode programmatically */
@custom-variant dark (&:is(.dark, .dark *));

/* include plugins */
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* define design tokens (light mode) */
:root {
  --background: hsl(0 0% 100%); /* White */
  --foreground: hsl(0 0% 15%); /* Dark gray for text */
  --card: hsl(0 0% 100%);
  --card-foreground: hsl(0 0% 15%);
  --popover: hsl(0 0% 100%);
  --popover-foreground: hsl(0 0% 15%);
  --primary: hsl(220 90% 50%); /* Blue for accents/buttons */
  --primary-foreground: hsl(0 0% 100%); /* White text on primary */
  --secondary: hsl(220 10% 95%); /* Light gray for muted backgrounds */
  --secondary-foreground: hsl(0 0% 15%);
  --muted: hsl(220 10% 95%);
  --muted-foreground: hsl(220 10% 45%); /* Muted text */
  --accent: hsl(220 10% 95%);
  --accent-foreground: hsl(0 0% 15%);
  --destructive: hsl(0 84.2% 60.2%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(220 10% 85%); /* Light gray border */
  --input: hsl(220 10% 85%);
  --ring: hsl(220 90% 50%);
  --chart-1: hsl(12 76% 61%);
  --chart-2: hsl(173 58% 39%);
  --chart-3: hsl(197 37% 24%);
  --chart-4: hsl(43 74% 66%);
  --chart-5: hsl(27 87% 67%);
  --sidebar-background: hsl(0 0% 98%); /* Very light gray for sidebar */
  --sidebar-foreground: hsl(0 0% 15%);
  --sidebar-primary: hsl(220 90% 50%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(220 10% 95%);
  --sidebar-accent-foreground: hsl(0 0% 15%);
  --sidebar-border: hsl(220 10% 85%);
  --sidebar-ring: hsl(220 90% 50%);
  /* border radius unit */
  --radius: 0.5rem;
  --sidebar: hsl(0 0% 98%);
}

/* define design tokens (dark mode) */
.dark {
  --background: hsl(220 15% 15%); /* Dark bluish-gray */
  --foreground: hsl(220 10% 90%); /* Light gray for text */
  --card: hsl(220 15% 18%);
  --card-foreground: hsl(220 10% 90%);
  --popover: hsl(220 15% 18%);
  --popover-foreground: hsl(220 10% 90%);
  --primary: hsl(220 90% 60%); /* Brighter blue */
  --primary-foreground: hsl(0 0% 10%);
  --secondary: hsl(220 10% 25%); /* Darker gray */
  --secondary-foreground: hsl(220 10% 90%);
  --muted: hsl(220 10% 25%);
  --muted-foreground: hsl(220 10% 60%);
  --accent: hsl(220 10% 25%);
  --accent-foreground: hsl(220 10% 90%);
  --destructive: hsl(0 62.8% 30.6%);
  --destructive-foreground: hsl(0 0% 95%);
  --border: hsl(220 10% 30%); /* Dark gray border */
  --input: hsl(220 10% 30%);
  --ring: hsl(220 90% 60%);
  --chart-1: hsl(220 70% 50%);
  --chart-2: hsl(160 60% 45%);
  --chart-3: hsl(30 80% 55%);
  --chart-4: hsl(280 65% 60%);
  --chart-5: hsl(340 75% 55%);
  --sidebar-background: hsl(220 15% 10%); /* Very dark bluish-gray for sidebar */
  --sidebar-foreground: hsl(220 10% 90%);
  --sidebar-primary: hsl(220 90% 60%);
  --sidebar-primary-foreground: hsl(0 0% 10%);
  --sidebar-accent: hsl(220 10% 25%);
  --sidebar-accent-foreground: hsl(220 10% 90%);
  --sidebar-border: hsl(220 10% 30%);
  --sidebar-ring: hsl(220 90% 60%);
  --sidebar: hsl(220 15% 10%);
}

/* define theme */
@theme {
  --font-sans: var(--font-geist);
  --font-mono: var(--font-geist-mono);

  --breakpoint-toast-mobile: 600px;

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@utility -webkit-overflow-scrolling-touch {
  -webkit-overflow-scrolling: touch;
}

@utility touch-pan-y {
  touch-action: pan-y;
}

@utility overscroll-behavior-contain {
  overscroll-behavior: contain;
}

@layer utilities {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    position: relative;
  }

  html {
    overflow-x: hidden;
  }

  /* Mobile input optimization */
  @media (max-width: 768px) {
    textarea {
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: pre-wrap;
    }
  }
}

/* Claude-style Artifact Enhancements */
.artifact-container {
  @apply space-y-4;
}

.artifact-section {
  @apply rounded-lg border border-border bg-background p-4 shadow-sm transition-all hover:shadow-md;
}

.artifact-section-header {
  @apply mb-3 flex items-center gap-2 text-lg font-semibold;
}

.artifact-code-block {
  @apply rounded-lg border border-border bg-muted/50 p-4 font-mono text-sm;
}

.artifact-visual-box {
  @apply rounded-lg border-2 border-primary/20 bg-primary/5 p-6;
}

.artifact-callout {
  @apply rounded-lg border-l-4 border-primary bg-primary/10 p-4 dark:bg-primary/20;
}

.artifact-callout-info {
  @apply border-blue-500 bg-blue-50 dark:bg-blue-950/30;
}

.artifact-callout-warning {
  @apply border-yellow-500 bg-yellow-50 dark:bg-yellow-950/30;
}

.artifact-callout-success {
  @apply border-green-500 bg-green-50 dark:bg-green-950/30;
}

.artifact-callout-error {
  @apply border-red-500 bg-red-50 dark:bg-red-950/30;
}

.artifact-diagram-container {
  @apply my-6 rounded-lg border border-border bg-background p-6 shadow-sm;
}

.artifact-table {
  @apply w-full border-collapse rounded-lg border border-border;
}

.artifact-table th {
  @apply border-b border-border bg-muted/50 px-4 py-2 text-left font-semibold;
}

.artifact-table td {
  @apply border-b border-border px-4 py-2;
}

.artifact-quiz-box {
  @apply rounded-lg border-2 border-purple-500/30 bg-purple-50 p-4 dark:bg-purple-950/20;
}

.artifact-example-box {
  @apply rounded-lg border-2 border-green-500/30 bg-green-50 p-4 dark:bg-green-950/20;
}

.artifact-key-point {
  @apply my-2 flex items-start gap-3 rounded-lg bg-muted/30 p-3;
}

/* Mermaid diagram styling */
.mermaid-container {
  @apply my-6 overflow-x-auto rounded-lg border border-border bg-background p-6 shadow-sm;
}

.mermaid-container svg {
  @apply mx-auto max-w-full;
}

.skeleton {
  * {
    pointer-events: none !important;
  }

  *[class^="text-"] {
    color: transparent;
    @apply rounded-md bg-foreground/20 select-none animate-pulse;
  }

  .skeleton-bg {
    @apply bg-foreground/10;
  }

  .skeleton-div {
    @apply bg-foreground/20 animate-pulse;
  }
}

.ProseMirror {
  outline: none;
}

.cm-editor,
.cm-gutters {
  @apply bg-background! dark:bg-zinc-800! outline-hidden! selection:bg-zinc-900!;
}

.ͼo.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground,
.ͼo.cm-selectionBackground,
.ͼo.cm-content::selection {
  @apply bg-zinc-200! dark:bg-zinc-900!;
}

.cm-activeLine,
.cm-activeLineGutter {
  @apply bg-transparent!;
}

.cm-activeLine {
  @apply rounded-r-sm!;
}

.cm-lineNumbers {
  @apply min-w-7;
}

.cm-foldGutter {
  @apply min-w-3;
}

.cm-lineNumbers .cm-activeLineGutter {
  @apply rounded-l-sm!;
}

.suggestion-highlight {
  @apply bg-blue-200 hover:bg-blue-300 dark:hover:bg-blue-400/50 dark:text-blue-50 dark:bg-blue-500/40;
}

/* minimal scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: --alpha(var(--muted-foreground) / 0.5);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
